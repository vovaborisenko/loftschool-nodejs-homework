"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(e){e(".lazy").Lazy(),new Plyr("#player"),e(".slider__wrap").slick({lazyLoad:"ondemand",slidesToShow:3,responsive:[{breakpoint:767,settings:{slidesToShow:2}},{breakpoint:700,settings:{slidesToShow:1}}]}),e(".offices__wrap").slick({infinite:!1});var t=document.querySelector(".nav__mobile");t.addEventListener("click",function(){t.classList.toggle("open")}),document.addEventListener("click",function(e){e.target.classList.contains("menu-item")&&e.target.classList.toggle("open"),e.target.parentNode.classList.contains("menu-item")&&e.target.parentNode.classList.toggle("open")}),document.querySelectorAll(".input-user").forEach(function(e){e.addEventListener("paste",function(e){e.preventDefault()}),e.addEventListener("input",function(e){i(e)})});var r=document.querySelectorAll(".input-phone"),a=function(e,t){for(var r=e,a=function(e){var t=[];e=(e=e.replace(/\s/g,"s")).replace(/(.)/g,"\\$1");for(var r=0;r<=e.length;r+=2){var a=e.substr(0,r);t.push({reg:new RegExp("(".concat(a,")")),length:a.length/2})}return t}(t),n=r.length;-1<n&&(r.length>=a.length&&(r=r.replace(/(.{18}).+/,"$1"),n=17),!(-1<r.search(a[n].reg)));n--)r=r.slice(0,r.length-1);return r},n=function(e){var t=e.target.value;t||(t="+7 ("),t=(t=(t=t.replace(/[^\d\+\(\)\s-]|^\s|\s\s$|^-|--$/g,"")).replace(/(\s)\s/g,"$1")).replace(/(-)-|-\s|\s-/g,"$1"),e.target.value=t},i=function(e){var t=e.target.value;t=(t=(t=(t=t.replace(/\s\s/g," ")).replace(/__/g,"_")).replace(/--|-\s|\s-/g,"-")).replace(/[^\wа-яА-Я\s-]|^\s|\s\s$|^-|--$/g,""),e.target.value=t};r.forEach(function(e){e.addEventListener("focus",function(e){n(e)}),e.addEventListener("keyup",function(e){n(e)}),e.addEventListener("paste",function(e){e.preventDefault(),n(e),e.target.value=a(e.target.value,"+d (ddd) ddd-dd-dd")}),e.addEventListener("input",function(e){var t=e.target.value;e.data?((t=a(t,"+d (ddd) ddd-dd-dd")).length<5&&(t="+7 ("),7===t.length&&(t+=")"),8===t.length&&(t+=" "),12!==t.length&&15!==t.length||(t+="-")):t.length<5&&(t="+7 ("),e.target.value=t})})}(jQuery);var map,offices=[],markers=[];function initMap(){var e=document.querySelectorAll(".office__data");map=new google.maps.Map(document.getElementById("map"),{zoom:10,center:{lat:55.73946,lng:37.6541889}}),e.forEach(function(e,t,r){if(e.dataset.latlng){var a=_slicedToArray(e.dataset.latlng.split(","),2),n=a[0],i=a[1];offices[t]={position:{lat:0,lng:0},slickIndex:"",region:""},offices[t].position={lat:Number(n),lng:Number(i)},offices[t].slickIndex=e.dataset.slickIndex,offices[t].region=e.dataset.region}}),offices.forEach(function(e,r){markers[r]={marker:"",region:"",slickIndex:""},markers[r].marker=new google.maps.Marker({position:e.position,map:map,icon:"http://localhost/green/wp-content/themes/green-site/img/pin.png"}),markers[r].region=e.region,markers[r].slickIndex=e.slickIndex,markers[r].marker.addListener("click",function(e){var t=Number(markers[r].slickIndex);map.panTo(markers[r].marker.position),document.querySelectorAll(".office__data").length<markers.length&&t>document.querySelectorAll(".office__data").length-1&&(t-=markers.length-document.querySelectorAll(".office__data").length),jQuery(".offices__wrap").slick("slickGoTo",t)})}),updateCenterMap()}document.addEventListener("change",function(t){if(t.target.id){var e=jQuery(".offices__wrap");e.slick("slickUnfilter"),"placeAll"!==t.target.id?e.slick("slickFilter","[data-region=".concat(t.target.id,"]")):e.slick("slickFilter",".office__data"),markers.forEach(function(e){e.marker.setVisible(!1),"placeAll"===t.target.id?e.marker.setVisible(!0):e.region===t.target.id&&e.marker.setVisible(!0)}),updateCenterMap()}}),jQuery(".offices__wrap").on("afterChange",function(){updateCenterMap()});var updateCenterMap=function(){var e=_slicedToArray(document.querySelector(".offices__wrap .slick-active").dataset.latlng.split(","),2),t=e[0],r=e[1];map.panTo({lat:Number(t),lng:Number(r)})};
//# sourceMappingURL=maps/main.min.js.map
